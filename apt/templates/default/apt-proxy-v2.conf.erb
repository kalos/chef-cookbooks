[DEFAULT]
;; All times are in seconds, but you can add a suffix
;; for minutes(m), hours(h) or days(d)

;; commented out address so apt-proxy will listen on all IPs
;; address = 127.0.0.1
port = 9999
cache_dir = /var/cache/apt-proxy

;; Control files (Packages/Sources/Contents) refresh rate
min_refresh_delay = 1s
complete_clientless_downloads = 1

;; Debugging settings.
debug = all:4 db:0

time = 30
passive_ftp = on

;;--------------------------------------------------------------
;; Cache housekeeping

cleanup_freq = 1d
max_age = 30d
max_versions = 3

;;---------------------------------------------------------------
;; Backend servers
;;
;; Place each server in its own [section]

[debian]
;; Backend servers, in order of preference
backends = 
<% @node[:apt][:mirrors].each do |mirror| -%>
  http://<%= mirror %>/debian
<% end -%>

[security]
;; Debian security archive
backends = 
  http://security.debian.org/debian-security
<% @node[:apt][:mirrors].each do |mirror| -%>
  http://<%= mirror %>/debian-security
<% end -%>

[debian-volatile]
backends =
  http://volatile.debian.org/debian-volatile
<% @node[:apt][:mirrors].each do |mirror| -%>
  http://<%= mirror %>/debian-volatile
<% end -%>
